<div class="report-widget">
    <h3><?= e($this->property('title')) ?></h3>

    <?php if ($total != 0 && !empty($rows)): ?>
    <div class="control-chart
        <?= $this->property('center') ? 'centered' : null ?>
         <?= $this->property('legendAsTable') ? null : 'wrap-legend' ?>
        "
        data-control="chart-pie"
        data-size="<?= $this->property('reportSize') ?>"
        data-center-text="<?= $total ?>"
    >
        <ul>
            <?php foreach ($rows as $row): ?>
            <li><?= e($row['sources']) ?> <span><?= $row['visits'] ?></span></li>
            <?php endforeach ?>
        </ul>
    </div>
    <?php else: ?>
    <p class="flash-message static warning"><?= e(trans('xeor.yandexwebmaster::lang.widgets.noresult')) ?></p>
    <?php endif ?>

    <?php if ($this->property('displayDescription')): ?>
    <p class="report-description"><?= e(trans('xeor.yandexwebmaster::lang.widgets.description_traffic_sources')) ?></p>
    <?php endif ?>
</div>